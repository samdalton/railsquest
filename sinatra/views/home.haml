- @page_title = "#{Railsquest.config.name}&rsquo;s Railsquest"

%style{:type => "text/css"}
  :sass
    .people
      :font-size 14px
      a
        :color black

%style{:type => "text/css"}
  :sass
    .quest
      :clear both
      :background-color white
      :-webkit-border-radius 10px
      :-moz-border-radius 10px
      :padding 7px 10px
      :margin 10px 0
      :position relative
      :border 4px solid #ff0
      :border 4px solid rgba(0,0,0,0.5)
      
      a
        :color #888
      
      h2, p.uri
        :margin 0
        :display inline

      h2
        :color #333
        :font-size 24px
      p.uri
        :color #666
        :margin 5px 0
        :font-size 12px
      
      p.branches
        :margin 5px 0
        :font-size 12px
      
      ul, li
        :margin 0
        :padding 0
        :list-style none
        
      p.readme
        :margin 0 -5px 0 0
        a
          :float right
          :margin 0
          :text-transform uppercase
          :font-size 10px
          :font-weight bold
          :color #999
          :background-color #eee
          :line-height 20px
          :padding 0 5px
          :text-decoration none
          :-webkit-border-radius 2px
          :-moz-border-radius 2px
          &:hover
            :color #666
            :background-color #ddd
        
      h3
        :margin 10px 0 0 0
        :font-size 12px
        :color #999
        :text-transform uppercase
      
      ul.network
        :margin-top 5px
        li
          :line-height 1em
          :min-height 16px
          :padding-left 30px
          :margin 10px 0
          &.loading
            :background transparent url('/loader.gif') no-repeat 4px center
          a.name
            :font-size 12px
            :font-weight bold
            :color #666
            :text-transform uppercase
            :text-decoration none
          span.branches
            :font-size 12px
            :color #999
          span.more
            :float right
            :width 15px
            :height 15px
            :color #fff
            :background-color #ccc
            :font-size 12px
            :line-height 15px
            :font-weight bold
            :-webkit-border-radius 2px
            :-moz-border-radius 2px
            :text-align center
            :cursor pointer
            &:hover
              :background-color #aaa
              :color #fff
          p.message
            :font-size 12px
            :margin 2px 0 5px 1px
            a
              :color #333
              :text-decoration none
              &:hover
                :text-decoration underline
            span.meta
              :font-size 10px
              :color #999
            em.branch
              :font-weight bold
              :font-style normal
              :color #666
          img.gravatar
            :float left
            :margin-left -30px
            :margin-top 2px
    
    img.gravatar
      :width 20px
      :height 20px
    
    .projects, .people
      :-moz-box-shadow 0px 2px 10px #000
      :-webkit-box-shadow 0px 2px 10px #000
      :float left
      :width 47%
      :background-color #686194
      :-webkit-border-radius 10px
      :-moz-border-radius 10px
      :margin-top 10px
      
      h2
        :margin 0
        :text-align center
        :font-size 16px
        :line-height 28px
        :background-color #686194
        :color #fff
        :text-transform uppercase
        
      h2.table_heading
        :-webkit-border-top-left-radius 5px
        :-moz-border-topleft-radius 5px
        :-webkit-border-top-right-radius 5px
        :-moz-border-topright-radius 5px
        :border-top 1px solid #B7B7B7
        :border-left 1px solid #989898
        :border-right 1px solid #989898
        :border-bottom 1px solid #858585
        :background-color #ccc
        :background-color #B7B7B7
        :background -webkit-gradient(linear,left bottom,left top,color-stop(0.1, rgb(163,163,163)),color-stop(0.9, rgb(222,222,222)))
        :background -moz-linear-gradient(top,  #DEDEDE,  #A3A3A3)
        :color #3E3E3E
        :text-shadow 0px 1px 1px #fff
        :padding 5px
        
      li.table_row
        :border-top 1px solid #fff
        :border-left 1px solid #989898
        :border-right 1px solid #989898
        :border-bottom 1px solid #858585
        :background-color #ccc
        :background-color #B7B7B7
        :background -webkit-gradient(linear,left bottom,left top,color-stop(0.1, rgb(163,163,163)),color-stop(0.9, rgb(222,222,222)))
        :background -moz-linear-gradient(top,  #DEDEDE,  #A3A3A3)
        :color #3E3E3E
        :text-shadow 0px 1px 1px #fff
        :padding 10px

      h3
        :margin 0 0 0px 0
        :color #3E3E3E
        
      ul, li
        :margin 0
        :padding 0
        :list-style none

      > ul
        :font-size 12px
        a
          :color #3E3E3E
      
    .projects
      ul li
        ul, li
          :display inline
      a
        :white-space nowrap
        
    .clear
      :clear both
    
    .people
      :margin-left 52px
      
    .people, .projects
      ul
        li
          a
            :text-decoration none
            &:hover
              :text-decoration underline
      
    .local .quest
      :border-color #980
      
    .create_quest
      :float right
      :color #fff
      :width 200px
      :line-height 150%
      :font-size 12px
      :text-shadow 0px 1px 1px #000

%audio{ :src => 'theme.mp3', :loop => 'true', :autoplay => 'true'}

- if local?    
  - unless @my_quest
    .create_quest
      %p
        To create a quest: 'railsquest add server_port quest_name'
    
  .clear

  .projects
    - if @people.empty?
      %h2.table_heading No Adventurers
    - else
      %h2.table_heading= pluralize @people.length, "Adventurer", "Adventurers"
      %ul
        - for person in @people
          %li.table_row
            %h3
              %a{:href => person.uri + Railsquest.host_name}= person.name    

  .people
    - if @all_quests.empty?
      %h2.table_heading No Quests
    - else
      %h2.table_heading=  pluralize @all_quests.length, "Quest", "Quests"
      %ul
        - for quest in @all_quests
          %li.table_row
            %h3
              %a{:href => quest.uri + '?hostname=' + Railsquest.host_name}= quest.name
              
- else
  .clear
  .projects
    - if @my_badges.empty?
      %h2.table_heading No badges
    - else
      %h2= pluralize @my_badges.length, "Badge", "Badges"
      %ul
        - for badge in @my_badges
          %li.table_row
            %h3= badge.name

  .people
    - if @my_quests.empty?
      %h2.table_heading No quests
    - else
      %h2= pluralize @my_quests.length, "Quest", "Quests"
      %ul
        - for quest in @my_quests
          %li.table_row
            %h3
              %a{:href => quest.uri + '?hostname=' + @adventurer }= quest.name